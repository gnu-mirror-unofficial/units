<html lang="en">
<head>
<title>Defining new units - Units: A Unit Conversion Program</title>
<meta http-equiv="Content-Type" content="text/html">
<meta name="description" content="Units: A Unit Conversion Program">
<meta name="generator" content="makeinfo 4.7">
<link title="Top" rel="start" href="index.html#Top">
<link rel="prev" href="Unit-definitions.html#Unit-definitions" title="Unit definitions">
<link rel="next" href="Nonlinear-units.html#Nonlinear-units" title="Nonlinear units">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<meta http-equiv="Content-Style-Type" content="text/css">
<style type="text/css"><!--
  pre.display { font-family:inherit }
  pre.format  { font-family:inherit }
  pre.smalldisplay { font-family:inherit; font-size:smaller }
  pre.smallformat  { font-family:inherit; font-size:smaller }
  pre.smallexample { font-size:smaller }
  pre.smalllisp    { font-size:smaller }
  span.sc { font-variant:small-caps }
  span.roman { font-family: serif; font-weight: normal; } 
--></style>
</head>
<body>
<div class="node">
<p>
<a name="Defining-new-units"></a>Next:&nbsp;<a rel="next" accesskey="n" href="Nonlinear-units.html#Nonlinear-units">Nonlinear units</a>,
Previous:&nbsp;<a rel="previous" accesskey="p" href="Unit-definitions.html#Unit-definitions">Unit definitions</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="index.html#Top">Top</a>
<hr><br>
</div>

<h2 class="chapter">7 Defining new units</h2>

<p><a name="index-defining-units-55"></a><a name="index-units_002c-redefinition-of-56"></a><a name="index-changing-units-definitions-57"></a>
All of the units and prefixes that <code>units</code> can convert are defined
in the units data file.  If you want to add your own units, you can
supply your own file.

   <p>A unit is specified on a single line by giving its name and an
equivalence.  Comments start with a <span class="samp">#</span> character, which can appear
anywhere in a line.  The backslash character (<span class="samp">\</span>)
acts as a continuation
character if it appears as the last character on a line, making it
possible to spread definitions out over several lines if desired. 
A file can be included by giving the command <span class="samp">!include</span> followed by
the file's name.  The file will be sought in the same directory as the
parent file unless a full path is given. 
<a name="index-include-files-58"></a>
Unit names must not contain any of the operator characters <span class="samp">+</span>,
<span class="samp">-</span>, <span class="samp">*</span>, <span class="samp">/</span>, <span class="samp">|</span>, <span class="samp">^</span> or the parentheses. 
They cannot begin with a digit or a decimal point (<span class="samp">.</span>), nor can
they end with a digit (except for zero). 
Be careful to define
new units in terms of old ones so that a reduction leads to the
primitive units, which are marked with <span class="samp">!</span> characters. 
Dimensionless units are indicated by using the string
<span class="samp">!dimensionless</span> for the unit definition. 
<a name="index-dimensionless-units-59"></a>
When adding new units, be sure to use the <span class="samp">-c</span> option to check that
the new units reduce properly. 
If you create a loop in the units definitions, then <code>units</code> will
hang when invoked with the <span class="samp">-c</span> options.  You will need to
use the <span class="samp">--check-verbose</span> option which prints out each unit as it
checks them.  The program will still hang, but the last unit printed
will be the unit which caused the infinite loop.

   <p>If you define any units which contain
<span class="samp">+</span> characters, carefully check them because the <span class="samp">-c</span> option
will not catch non-conformable sums.  Be careful with the <span class="samp">-</span>
operator as well.  When used as a binary operator, the <span class="samp">-</span>
character can perform addition or multiplication
depending on the options used to invoke <code>units</code>. 
To ensure consistent behavior use <span class="samp">-</span> only as a unary negation
operator when writing units definitions.  To multiply two units leave a
space or use the <span class="samp">*</span> operator.  To compute the difference
of <span class="samp">foo</span> and <span class="samp">bar</span> write <span class="samp">foo+(-bar)</span> or even <span class="samp">foo+-bar</span>.

   <p>Here is an example of a short units file that defines some basic
units:
<!-- noman -->

<pre class="example">     m       !               # The meter is a primitive unit
     sec     !               # The second is a primitive unit
     rad     !dimensionless  # A dimensionless primitive unit
     micro-  1e-6            # Define a prefix
     minute  60 sec          # A minute is 60 seconds
     hour    60 min          # An hour is 60 minutes
     inch    0.0254 m        # Inch defined in terms of meters
     ft      12 inches       # The foot defined in terms of inches
     mile    5280 ft         # And the mile
</pre>
   <!-- end noman -->
<!-- man .in +2m -->
<!-- man .ta 9m +10m -->
<!-- man .nf -->
<!-- man -->
<!-- man m	!	# The meter is a primitive unit -->
<!-- man sec	!	# The second is a primitive unit -->
<!-- man rad	!dimensionless	# The second is a primitive unit -->
<!-- man micro-	1e-6	# Define a prefix -->
<!-- man minute	60 sec	# A minute is 60 seconds -->
<!-- man hour	60 min	# An hour is 60 minutes -->
<!-- man inch	0.0254 m	# Inch defined in terms of meters -->
<!-- man ft	12 inches	# The foot defined in terms of inches -->
<!-- man mile	5280 ft	# And the mile -->
<!-- man -->
<!-- man .fi -->
<!-- man .in -2m -->
<p class="noindent">A unit which ends with a <span class="samp">-</span> character is a prefix.  If a prefix
definition contains any <span class="samp">/</span> characters, be sure they are protected
by parentheses.  If you define <span class="samp">half- 1/2</span> then <span class="samp">halfmeter</span>
would be equivalent to <span class="samp">1 / 2 meter</span>.

   </body></html>

